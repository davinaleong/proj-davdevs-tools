---
import { getCollection } from 'astro:content';
import ToolLayout from '../../layouts/ToolLayout.astro';

export async function getStaticPaths() {
  const tools = await getCollection('tools');
  return tools.map((tool) => ({
    params: { slug: tool.slug },
  }));
}

const tools = await getCollection('tools');
const { slug } = Astro.params;

const tool = tools.find((item) => item.slug === slug);

if (!tool) {
  throw new Error(`Tool not found: ${slug}`);
}

const { Content } = await tool.render();
const { data } = tool;
---

<ToolLayout title={data.title} description={data.description}>
  <Content />
</ToolLayout>
